@(model: models.admin.games.StatsModel)(implicit header: MenuModel, req: RequestHeader, seasonId: Int)

@import play.api.libs.json.Json

@extraScripts = {
	@helper.javascriptRouter("routes")(
		routes.javascript.GameController.uploadStats
	)

	<script src="@routes.Assets.at("javascripts/knockout.min.js")"></script>
	<script src="@routes.Assets.at("fileupload/js/vendor/jquery.ui.widget.js")"></script>
	<script src="@routes.Assets.at("fileupload/js/jquery.iframe-transport.js")"></script>
	<script src="@routes.Assets.at("fileupload/js/jquery.fileupload.js")"></script>
	<script>
		admin.games.stats = {
			data: @Html(Json.toJson(model).toString) || {}
		};
	</script>
	<script src="@routes.Assets.at("javascripts/views/admin/games/Stats.js")"></script>
}

@extraCss = {
	<link rel="stylesheet" href="fileupload/css/jquery.fileupload.css" />
}

@views.html.admin.games.gamesTemplate("Stats", extraScripts = extraScripts, extraCss = extraCss) {
	<div class="panel panel-default" style="display: none;" data-bind="visible: true">
		<div class="panel-heading"><h4>Stats</h4></div>
		<div class="panel-body">

			<!-- ko if: hasStats -->
			<!-- /ko -->

			<!-- ko ifnot: hasStats -->
				<form method="post" action="@routes.GameController.uploadStats(seasonId, model.gameId)">
					<label for="statsUpload">Upload a demo...</label>
					<input type="file" name="demo" id="statsUpload" />
					<button>Upload</button>
				</form>
			<!-- /ko -->
		</div>
	</div>
}

